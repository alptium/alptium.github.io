# Релационе базе података

Релациона база података је посебан тип базе података код којег се организација података заснива на релационом моделу. Подаци се у оваквим базама организују у скуп релација између којих се дефинишу одређене везе. Релација се дефинише као скуп н-торки са истим атрибутима, дефинисаних над истим доменима из којих могу да узимају вредности. У релационим базама података, свака релација мора да има дефинисан примарни кључ, који представља атрибут помоћу којег се јединствено идентификује свака н-торка. Релација опционо може да поседује и спољни кључ, преко којег остварује везу са другим релацијама.

Управљање оваквим базама података се реализује преко система за управљање релационим базама података. Међу најпопуларнијим таквим системима данас су: Microsoft SQL Server, Oracle Database, MySQL и други. Већина тих система користи упитни језик SQL за манипулацију подацима.  

## Релација

Свака релација може без икаквих проблема да се представи у табеларном облику, али и поред тога, релација и табела нису исто. То је из разлога што је код табела битан редослед редова и колона, док код релација није битан редослед атрибута и н-торки. На пример, табела 1 има колоне са редоследом: име, презиме, јмбг. Табела 2 има колоне са редоследом: јмбг, презиме, име. Те две табеле се не сматрају истим, без обзира што имају исте називе колона. И поред тога што релација и табела нису синоними, данас се углавном свака релација назива табелом, тј. њени елементи се поистовећују са елементима који чине једну табелу. Из тог разлога су у следећој табели дати појмови из релационог и табеларног модела који се односе на исто.

Табела | Релација
------ | --------
Ред табеле | н-торка
Колона, назив колоне, вредност колоне	| Атрибут, назив атрибута, вредност атрибута
Табела | Базна релација
Скуп назива колона | Релациона шема
Поглед, резултат упита | Изведена релација

Н-торка се дефинише као уређени скуп од „н“ елемената.

Атрибут представља име којим се у релационом моделу, идентификује сваки од елемената једне н-торке. У доњем примеру атрибути су "студент", "статус" и "просек" а елементи н-торке су "Марко", "Буџет" и "8.2".

(Студент: "Марко" , Статус: "Буџет" , Просек: 8.2)

Релација се дефинише као скуп н-торки који имају исте атрибуте којима су идентификовани њихови елементи, и који узимају вредности из истих домена. Пример релације:

(Студент: "Марко" , Статус: "Буџет" , Просек: 8.2)
(Студент: "Јован" , Статус: "Буџет" , Просек: 9.1)
(Студент: "Бојан" , Статус: "Самоф" , Просек: 7.8)

## Примарни кључ

У свакој релацији мора да постоји један или више атрибута заједно, чије вредности јединствено идентификују сваку н-торку у тој релацији. Тај атрибут, или група атрибута се назива примарним кључем релације. У случају када један атрибут јединствено идентификује сваку н-торку у релацији имамо прост примарни кључ, а ако је идентификују два или више атрибута, онда је у питању сложени примарни кључ. Примарни кључ је дакле скуп од К елемената неке релације, који морају да задовољавају следећа два услова: особину јединствености и особину нередудантности. Особина јединствености подразумева да не могу да постоје било које две н-торке са истом вредношћу атрибута „К“. Особина нередудантности подразумева да ако се изостави било који атрибут из К, губи се особина јединствености. У доњем примеру, атрибут "Шифра" представља прост примарни кључ релације.

(Шифра: 432 , Студент: "Марко" , Статус: "Буџет" , Просек: 8.2)
(Шифра: 436 , Студент: "Јован" , Статус: "Буџет" , Просек: 9.1)
(Шифра: 527 , Студент: "Бојан" , Статус: "Самоф" , Просек: 7.8)

## Спољни кључ 

Спољни кључ представља атрибут (или групу атрибута) неке релације Р1, који у њој није примарни кључ, али јесте у некој другој релацији Р2. С тим у вези, релација Р1 се повезује са релацијом Р2 преко спољног кључа. Да би веза између те две релације била исправна, морају се задовољити правила референцијалног интегритета. Укратко, под референцијалним интегритетом се подразумева да све вредности које узима атрибут који представља спољни кључ, морају да постоје и у релацији у којој је тај атрибут примарни кључ. У примеру који следи, атрибут "ШифраСмера" представља спољни кључ у првој релацији, и у овом случају су задовољена правила референцијалног интегритета.

![spoljnikljuc](/github-slike/SpoljniKljuc.PNG)

## Structured Query Language (SQL)

Упитни језици су намењени за комуникацију са релационом базом података, тј. за креирање релационих шема и ажурирање и читање података из релација.
SQL представља последњу фазу развоја упитних језика од стране истраживачке IBM лабораторије. Његови претходници развијени од стране те IBM лабораторије су били упитни језици SQUARE и SEQUEL. SQL стандард је објављен 1989. године и одмах је био широко прихваћен на тржишту. Неки од битних својстава су му: језик за дефинисање података(Data Definition Language), језик за манипулацију подацима(Data Manipulation Language), спољашње и унутрашње спајање, каскадно ажурирање и брисање, скуповне операције (унија, пресек и разлика) спајање итд. 

## Језик за дефинисање података (Data Definition Language)

Овај део упитног језика служи за креирање и ажурирање објеката који чине релациону базу података, а ту спадају базне релације, релационе шеме, семантички домени, индекси итд.

**Генерички DDL упит за креирање базне релације(табеле):**

CREATE TABLE <naziv tabele>
    (<naziv kolone1> <tip podataka> [not null],
     <naziv kolone2> <tip podataka> [not null],
     ...
    )
- Следећи упит ће креирати табелу "студенти":

![create](/github-slike/create.png)

**Генерички DDL упит за креирање семантичког домена:**

CREATE DOMAIN <naziv domena> [AS] <predefinisani tip>
    [DEFAULT <vrednost>]
    [[CONSTRAINT <naziv ogranicenja>] CHECK (<ogranicenje>)]
     ...
- Следећи упит ће креирати домен над колоном "године" и поставља се ограничење да године морају бити преко 18:  
    
![domain](/github-slike/domain.png)
     
 **Генерички DDL упит за измену дефиниције релације(табеле):**
 
 ALTER TABLE <naziv tabele>
 ADD [COLUMN] <definicija kolone> 
 - Следећи упит ће табели "студенти" додати колону "датум_рођења":
 
 ![alter](/github-slike/alter.png)
 
## Језик за манипулацију подацима (Data Manipulation Language)

Овај део упитног језика служи за манипулацију подацима у бази, тј. за приказивање, брисање, убацивање и ажурирање података. С тим у вези, састоји се од четири основне команде: SELECT, INSERT, UPDATE, DELETE.

**Генерички упит за читање података из базе, који се ослања на операције рестрикције и пројекције из релационе алгебре:**

SELECT < lista atributa >
    FROM < lista relacija >
    WHERE < kvalifikacioni izraz >    
- Следећи упит ће вратити све редове табеле "студенти" који су на буџету - у колони "статус" имају вредност "буџет":
    
![select](/github-slike/select.png)
    
**Генерички упит за убацивање података у базу:**

INSERT INTO naziv_tabele
    VALUES (vrednost_atr1, vrednost_atr2,. .. )
- Следећи упит ће убацити нови ред у табелу "студенти":

![insert](/github-slike/insert.png)

**Генерички упит за брисање података из базе:**

DELETE FROM naziv_tabele
- Следећи упит ће избрисати све редове из табеле "студенти" који имају шифру смера 1:

![delete](/github-slike/delete.png)

**Генерички упит за ажурирање података у бази:**

UPDATE naziv_tabele
    SET(atribut1, atribut2, ...)=(nove vrednosti)
    WHERE [kriterijum selekcije n-torki]
- Следећи упит ће ажурирати ред из табеле "студенти" тј. студента који има шифру 3:

![update](/github-slike/update.png)

**Оператори уније, пресека и разлике Ове операције се ослањају на истоимене операције у релационој алгебри. Пример пресека:**

SELECT atribut_1
    FROM tabela_1
    EXCEPT 
    SELECT atribut_2 
    FROM tabela_2;

    WHERE [kriterijum selekcije n-torki]
- Следећи упит ће вратити све редове табеле "предмет" тј. све предмете који се не налазе у табели "студент": 

![except](/github-slike/except.png)

